webpackJsonp([1],{"0r/Q":function(t,e){},"31y0":function(t,e){},"4ml/":function(t,e){},"6YGf":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({},r,!1,function(t){n("n5jB")},null,null).exports,o=n("/ocq"),s=n("Fd2+"),c=n("mtWM"),u=n.n(c),l=n("mw3O"),d=n.n(l);u.a.interceptors.request.use(function(t){console.group("本次请求的路径为："+t.url);var e=JSON.parse(sessionStorage.getItem("data")||"{}");return e.token&&(t.headers.authorization=e.token),t}),u.a.interceptors.response.use(function(t){return console.group("本次响应的路径为："+t.config.url),console.log(t.data),t.data});var p={data:function(){return{active:0,bannerlist:[],goodslist:[{content:[]},{content:[]},{content:[]}]}},methods:{getBanner:function(){var t=this;u()({method:"get",url:"/api/api/getbanner"}).then(function(e){200==e.code&&(t.bannerlist=e.list)})},getIndexGoods:function(){var t=this;u()({method:"get",url:"/api/api/getindexgoods"}).then(function(e){200==e.code&&(t.goodslist=e.list)})}},mounted:function(){this.getBanner(),this.getIndexGoods()}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"indexs"},[n("van-nav-bar",{attrs:{title:"首页"}}),t._v(" "),n("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:3e3,"indicator-color":"red"}},t._l(t.bannerlist,function(e){return n("van-swipe-item",{key:e.id},[n("img",{attrs:{src:t.$preImg+e.img,alt:""}})])}),1),t._v(" "),n("van-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tab",{attrs:{title:"热门推荐"}},t._l(t.goodslist[0].content,function(e){return n("van-card",{key:e.id,attrs:{price:e.market_price,title:e.goodsname,tag:"hot",thumb:t.$preImg+e.img},scopedSlots:t._u([{key:"footer",fn:function(){return[n("van-button",{attrs:{type:"primary",size:"small",icon:"cart-o"}})]},proxy:!0}],null,!0)})}),1),t._v(" "),n("van-tab",{attrs:{title:"新品上市"}},t._l(t.goodslist[1].content,function(e){return n("van-card",{key:e.id,attrs:{price:e.market_price,title:e.goodsname,tag:"new",thumb:t.$preImg+e.img},scopedSlots:t._u([{key:"footer",fn:function(){return[n("van-button",{attrs:{type:"primary",size:"small",icon:"cart-o"}})]},proxy:!0}],null,!0)})}),1),t._v(" "),n("van-tab",{attrs:{title:"全部商品"}},t._l(t.goodslist[2].content,function(e){return n("van-card",{key:e.id,attrs:{price:e.market_price,title:e.goodsname,thumb:t.$preImg+e.img},scopedSlots:t._u([{key:"footer",fn:function(){return[n("van-button",{attrs:{type:"primary",size:"small",icon:"cart-o"}})]},proxy:!0}],null,!0)})}),1)],1)],1)},staticRenderFns:[]};var m=n("VU/8")(p,v,!1,function(t){n("31y0")},null,null).exports,f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view"),t._v(" "),n("van-tabbar",{attrs:{route:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tabbar-item",{attrs:{icon:"home-o",to:"/index"}},[t._v("首页")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"apps-o",to:"/cate"}},[t._v("分类")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"shopping-cart-o",to:"/shoppingcar"}},[t._v("购物车")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"user-o",to:"/mime"}},[t._v("我的")])],1)],1)},staticRenderFns:[]};var g=n("VU/8")({data:function(){return{active:0}}},f,!1,function(t){n("aWpp")},null,null).exports,h={data:function(){return{cartList:[]}},computed:{change:function(){var t=0;return this.cartList.map(function(e){t+=e.num*e.price}),100*t}},mounted:function(){var t,e=this,n=JSON.parse(sessionStorage.getItem("data")||"{}");if(n.token){var a=n.uid;(t={uid:a},u()({method:"get",url:"/api/api/cartlist",params:t})).then(function(t){200==t.code&&(e.cartList=t.list)})}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"购物车","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),t._v(" "),n("van-swipe-cell",{scopedSlots:t._u([{key:"right",fn:function(){return[n("van-button",{staticClass:"delete-button",attrs:{square:"",text:"删除",type:"danger"}})]},proxy:!0}])},t._l(t.cartList,function(e,a){return n("van-card",{key:e.id,staticClass:"goods-card",attrs:{price:e.price,title:e.goodsname,thumb:t.$preImg+e.img},scopedSlots:t._u([{key:"footer",fn:function(){return[n("van-stepper",{attrs:{theme:"round","button-size":"22","disable-input":""},model:{value:t.cartList[a].num,callback:function(e){t.$set(t.cartList[a],"num",e)},expression:"cartList[index].num"}})]},proxy:!0}],null,!0)})}),1),t._v(" "),n("van-submit-bar",{attrs:{price:t.change,"button-text":"提交订单"}})],1)},staticRenderFns:[]};var _=n("VU/8")(h,b,!1,function(t){n("6YGf")},null,null).exports,k={data:function(){return{nickname:""}},methods:{changeName:function(){sessionStorage.removeItem("data"),this.$toast.success("退出成功"),this.$router.push("/login")}},mounted:function(){var t=JSON.parse(sessionStorage.getItem("data")||"{}");t&&(this.nickname=t.nickname)}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:"会员中心","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),t._v(" "),n("div",{staticClass:"touxiang"},[n("van-image",{attrs:{round:"",width:"10rem",height:"10rem",src:"https://img.yzcdn.cn/vant/cat.jpeg"}}),t._v(" "),n("div",{staticClass:"names"},[t._v(t._s(t.nickname))])],1),t._v(" "),n("van-button",{attrs:{type:"danger",block:""},on:{click:t.changeName}},[t._v("安全退出")]),t._v(" "),n("div",{staticClass:"mian"},[n("van-cell",{attrs:{"is-link":"",title:"我的收藏"}}),t._v(" "),n("van-cell",{attrs:{"is-link":"",title:"我的评论"}}),t._v(" "),n("van-cell",{attrs:{"is-link":"",title:"我的订单"}})],1)],1)},staticRenderFns:[]};var x=n("VU/8")(k,y,!1,function(t){n("X8f8")},"data-v-4dace73a",null).exports,$=n("mvHQ"),w=n.n($),S={data:function(){return{data:{phone:"",password:""}}},methods:{onSubmit:function(t){var e,n=this;(e=this.data,u()({method:"post",url:"/api/api/login",data:d.a.stringify(e)})).then(function(t){200==t.code?(sessionStorage.setItem("data",w()(t.list)),n.$toast.success(t.msg),n.$router.push("/index")):n.$toast.fail(t.msg)})}}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{"right-text":"注册",title:"登录"},on:{"click-right":function(e){return t.$router.push("/register")}}}),t._v(" "),n("van-form",{on:{submit:t.onSubmit}},[n("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},model:{value:t.data.phone,callback:function(e){t.$set(t.data,"phone",e)},expression:"data.phone"}}),t._v(" "),n("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.data.password,callback:function(e){t.$set(t.data,"password",e)},expression:"data.password"}}),t._v(" "),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"danger","native-type":"submit"}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var U=n("VU/8")(S,I,!1,function(t){n("WhoA")},null,null).exports,C={data:function(){return{data:{phone:"",nickname:"",password:""}}},methods:{onSubmit:function(){var t,e=this;(t=this.data,u()({method:"post",url:"/api/api/register",data:d.a.stringify(t)})).then(function(t){200==t.code&&(e.$toast.success(t.msg),e.$router.push("/login"))})}}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{"right-text":"登录",title:"注册"},on:{"click-right":function(e){return t.$router.push("/login")}}}),t._v(" "),n("van-form",{on:{submit:t.onSubmit}},[n("van-field",{attrs:{name:"用户名",label:"手机号",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:t.data.phone,callback:function(e){t.$set(t.data,"phone",e)},expression:"data.phone"}}),t._v(" "),n("van-field",{attrs:{name:"昵称",label:"昵称",placeholder:"昵称",rules:[{required:!0,message:"请填写你的昵称"}]},model:{value:t.data.nickname,callback:function(e){t.$set(t.data,"nickname",e)},expression:"data.nickname"}}),t._v(" "),n("van-field",{attrs:{type:"password",name:"密码",label:"设置密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:t.data.password,callback:function(e){t.$set(t.data,"password",e)},expression:"data.password"}}),t._v(" "),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"danger","native-type":"submit"}},[t._v("注册")])],1)],1)],1)},staticRenderFns:[]};var F=n("VU/8")(C,E,!1,function(t){n("abvM")},null,null).exports,N={data:function(){return{activeKey:0,firstcate:[],secondcate:[]}},methods:{gettree:function(){var t=this;u()({method:"get",url:"/api/api/getcatetree"}).then(function(e){200==e.code&&(t.firstcate=e.list,t.getCate(0))})},getCate:function(t){this.secondcate=this.firstcate[t].children,console.log(this.secondcate)}},mounted:function(){this.gettree()}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{"left-arrow":"",title:"分类"},on:{"click-left":function(e){return t.$router.go(-1)}}}),t._v(" "),n("van-sidebar",{model:{value:t.activeKey,callback:function(e){t.activeKey=e},expression:"activeKey"}},t._l(t.firstcate,function(e,a){return n("van-sidebar-item",{key:e.id,attrs:{title:e.catename},on:{click:function(e){return t.getCate(a)}}})}),1),t._v(" "),n("van-grid",{attrs:{border:!1,"column-num":3}},t._l(t.secondcate,function(e){return n("van-grid-item",{key:e.id,attrs:{to:"/goodslist?fid="+e.id}},[n("van-image",{attrs:{src:t.$preImg+e.img}}),t._v(" "),n("p",[t._v(t._s(e.catename))])],1)}),1)],1)},staticRenderFns:[]};var R=n("VU/8")(N,q,!1,function(t){n("NiUY")},null,null).exports,V={data:function(){return{goodslist:[]}},methods:{getgoodslist:function(){var t,e=this,n=this.$route.query.fid;(t={fid:n},u()({method:"get",url:"/api/api/getgoods",params:t})).then(function(t){200==t.code&&(e.goodslist=t.list)})}},mounted:function(){this.getgoodslist()}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{"left-arrow":"",title:"商品列表"},on:{"click-left":function(e){return t.$router.go(-1)}}}),t._v(" "),null!==t.goodslist?n("div",t._l(t.goodslist,function(e){return n("van-card",{key:e.id,attrs:{price:e.price,title:e.goodsname,thumb:t.$preImg+e.img},scopedSlots:t._u([{key:"footer",fn:function(){return[n("van-button",{attrs:{type:"primary",size:"small",icon:"cart-o"}})]},proxy:!0}],null,!0)})}),1):n("van-empty",{attrs:{description:"暂无数据"}})],1)},staticRenderFns:[]};var L=n("VU/8")(V,z,!1,function(t){n("0r/Q")},null,null).exports;a.a.use(o.a);var O=new o.a({routes:[{path:"/",component:g,redirect:"/index",children:[{path:"/index",name:"首页",component:m},{path:"/shoppingcar",name:"购物车",component:_},{path:"/mime",name:"我的",component:x},{path:"/cate",name:"分类",component:R},{path:"/goodslist",name:"商品列表",component:L}]},{path:"/login",name:"登录",component:U},{path:"/register",name:"注册",component:F}]});O.beforeEach(function(t,e,n){if(("/mime"==t.path||"/shoppingcar"==t.path)&&!JSON.parse(sessionStorage.getItem("data")||"{}").token)return s.a.fail("请登录"),void O.push("/login");n()});var W=O;n("4ml/");a.a.use(s.b),a.a.prototype.$preImg="http://localhost:3000",new a.a({el:"#app",router:W,components:{App:i},template:"<App/>"})},NiUY:function(t,e){},WhoA:function(t,e){},X8f8:function(t,e){},aWpp:function(t,e){},abvM:function(t,e){},n5jB:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fd4141778d47ca986866.js.map